---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import createSlug from "../lib/createSlug";


// Fetch all projects from the collection
const projects = await getCollection("projects");

// Sort projects by date or another criterion
projects.sort((a, b) => new Date(b.data.date) - new Date(a.data.date));
---

<BaseLayout title="Projects" sideBarActiveItemID="projects">
  <div>
    <div class="text-3xl w-full font-bold mb-5 gradient-text">Projects</div>
  </div>

  {projects.map((project) => (
    <HorizontalCard
      key={createSlug(project.data.title)} // Unique key for each project card
      title={project.data.title}
      img={project.data.heroImage}  
      desc={project.data.description || 'No description available'} // Fallback for description
      url={"/projects/" + createSlug(project.data.title, project.slug)}
      target="_self"  
      // badge="NEW"  // Optional badge
    />
  ))}
</BaseLayout>

